# Mac Os X screencast to animated GIF
ffmpeg -y -i recording.mov -vf fps=10,palettegen palette.png
ffmpeg -i recording.mov -i palette.png -filter_complex "fps=10,paletteuse" out.gif

# More complicated gif creation
# -ss        start at timestamp
# -t         read only x seconds
# fps        frames per second
# scale      scale with lanczos algo
# palette*   create palette
# split      do everything in one command
# loop       0 infinite looping (confusing), -1 no looping, 1 run twice (loop once)
ffmpeg -ss 30 -t 3 -i input.mp4 -vf "fps=10,scale=320:-1:flags=lanczos,split[s0][s1];[s0]palettegen[p];[s1][p]paletteuse" -loop 0 output.gif

# Crop video (see result)
ffplay -i input.webm -vf "crop=334:720"

# Crop then generate gif
ffmpeg -t 3 -i input.webm -vf "crop=334:720,fps=10,scale=1024:-1:flags=lanczos,split[s0][s1];[s0]palettegen[p];[s1][p]paletteuse" -loop 0 output.gif


# mp3 to wav
ffmpeg -i song.mp3 -acodec pcm_u8 -ar 22050 song.wav

# Record screen on macOS
# See https://ffmpeg.org/ffmpeg-devices.html#avfoundation
# 1. List devices
ffmpeg -f avfoundation -list_devices true -i ""
# 2. Record
ffmpeg -f avfoundation -i "<screen device index>:<audio device index>" output.mkv
# Example:
ffmpeg -f avfoundation -i "4" output.mkv

# Create timelapse with setpts (change the PTS - presentation timestamp - of the input frames)
-filter:v "setpts=0.0625*PTS"

# See also:
# man ffmpeg
# man ffmpeg-filters
# gifify

# Resources:
# https://img.ly/blog/ultimate-guide-to-ffmpeg/
