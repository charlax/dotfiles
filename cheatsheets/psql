# Login with password
PGPASSWORD=password psql -h 127.0.0.1 -p 5432 -U username -d dbname

```psql
# list databases
\l
\l+  -- include extra info e.g. size

# select database
\c dbname

# show create table
\d tablename
\d+ tablename  # show all table info
\dn            # list schemas

\x  # extended display
```

```sql
DELETE FROM tablename WHERE ...;

# Drop db
drop database dbname;
```

## Privileges

```psql
-- list roles
\du

-- give rights by default
ALTER DEFAULT PRIVILEGES IN SCHEMA b2b GRANT SELECT ON TABLES TO username;

-- give select permissions
grant select on tablename to username;

-- get permissions for a table
select grantee, privilege_type from information_schema.role_table_grants where table_name='aliases';
```

## Get table size

SELECT pg_size_pretty( pg_total_relation_size('tablename') );

## Export

```sql
copy (select * from users) to '/tmp/stuff.csv' with csv;
```

## Select

### Select `distinct`

```sql
-- https://www.postgresql.org/docs/current/sql-select.html#SQL-DISTINCT
SELECT DISTINCT ON (location) location, time, report
    FROM weather_reports
    ORDER BY location, time DESC;
```
